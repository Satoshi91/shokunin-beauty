# 機能要件

## 概要

本ドキュメントでは、職人Beautyの機能要件を優先度別に定義します。

## 優先度定義

| 優先度 | 説明 |
|--------|------|
| **P0** | MVP必須。これがないとサービスとして成立しない |
| **P1** | 重要。MVPリリース後、早期に実装したい |
| **P2** | あると良い。将来的に実装を検討 |

---

## P0: MVP必須機能

### 1. ユーザー認証

#### 1.1 会員登録
- **発注者として登録**
  - メールアドレス + パスワードで登録
  - 氏名、電話番号、住所（任意）を入力
- **職人として登録**
  - メールアドレス + パスワードで登録
  - 事業者情報の入力

#### 1.2 ログイン・ログアウト
- メールアドレス + パスワードでログイン
- セッション管理
- ログアウト機能

### 2. 職人プロフィール管理

#### 2.1 プロフィール作成・編集
- 基本情報
  - 表示名
  - 自己紹介文
  - プロフィール画像
- 対応エリア
  - 都道府県・市区町村
  - 対応可能範囲（km）
- 資格・経験
  - 保有資格
  - 経験年数
  - 実績紹介

#### 2.2 サービスメニュー登録
- 対応可能なサービスの選択
- サービスごとの料金設定
- 作業時間の目安

#### 2.3 空き状況管理
- カレンダー形式での空き日時設定
- 定休日の設定
- 予約受付可能時間帯の設定

### 3. 職人検索・一覧

#### 3.1 検索条件
- エリア検索（都道府県、市区町村、郵便番号）
- サービスカテゴリ検索
- 日時での絞り込み

#### 3.2 一覧表示
- 職人カード形式での一覧
- 評価（星）表示
- 料金目安表示
- ソート機能（評価順、料金順）

#### 3.3 職人詳細ページ
- プロフィール詳細
- サービスメニュー・料金表
- 空きカレンダー
- レビュー一覧

### 4. 予約システム

#### 4.1 予約リクエスト
- 空き日時の選択
- サービスの選択
- 作業内容の入力（住所、詳細説明）
- 予約リクエスト送信

#### 4.2 予約管理（職人側）
- 予約リクエスト一覧
- 予約の承認・却下
- 予約詳細確認

#### 4.3 予約管理（発注者側）
- 予約状況一覧
- 予約ステータス確認
- キャンセル機能

#### 4.4 予約ステータス
```
[pending] 予約リクエスト中
    ↓
[confirmed] 予約確定 ← 職人が承認
    ↓
[completed] 作業完了
    ↓
[reviewed] レビュー済み

[cancelled] キャンセル（どの段階からでも遷移可能）
[rejected] 却下（職人が予約を断った）
```

### 5. レビュー・評価

#### 5.1 レビュー投稿
- 作業完了後に投稿可能
- 5段階の星評価
- コメント入力

#### 5.2 レビュー表示
- 職人詳細ページにレビュー一覧
- 平均評価の計算・表示

---

## P1: 重要機能

### 6. 通知機能

#### 6.1 メール通知
- 予約リクエスト受信通知（職人へ）
- 予約確定通知（発注者へ）
- 予約リマインダー（前日通知）
- レビュー投稿依頼

#### 6.2 アプリ内通知
- 通知一覧画面
- 未読/既読管理

### 7. メッセージ機能

#### 7.1 職人と発注者間のメッセージ
- 予約に紐づくメッセージスレッド
- テキストメッセージ送受信
- 画像添付（作業場所の写真など）

### 8. 管理機能

#### 8.1 サービスカテゴリ管理
- カテゴリの追加・編集
- カテゴリ階層管理

#### 8.2 職人審査
- 職人登録時の審査フロー
- 本人確認書類の提出

---

## P2: 将来機能

### 9. 決済機能

#### 9.1 オンライン決済
- クレジットカード決済
- 事前決済 / 後払い選択

#### 9.2 売上管理
- 職人向け売上レポート
- 手数料計算

### 10. 高度な検索

#### 10.1 即時予約
- 空き状況から即時予約確定
- 自動承認設定

#### 10.2 見積もり依頼
- 複数職人への一括見積もり依頼
- 見積もり比較機能

### 11. マーケティング機能

#### 11.1 クーポン
- 初回利用クーポン
- 職人独自のクーポン発行

#### 11.2 お気に入り
- 職人のお気に入り登録
- お気に入り一覧

---

## ユーザーストーリー

### 発注者のユーザーストーリー

| ID | ストーリー | 優先度 |
|----|-----------|--------|
| U-C01 | エアコン取り付けを依頼できる職人を地域で検索したい | P0 |
| U-C02 | 職人の評価・レビューを見て信頼性を判断したい | P0 |
| U-C03 | 料金の目安を事前に知りたい | P0 |
| U-C04 | 空いている日時を確認して予約したい | P0 |
| U-C05 | 予約状況を確認したい | P0 |
| U-C06 | 作業完了後にレビューを投稿したい | P0 |
| U-C07 | 職人と事前にメッセージでやり取りしたい | P1 |
| U-C08 | 予約のリマインダーを受け取りたい | P1 |

### 職人のユーザーストーリー

| ID | ストーリー | 優先度 |
|----|-----------|--------|
| U-W01 | 自分のプロフィールを登録して顧客にアピールしたい | P0 |
| U-W02 | 対応可能なサービスと料金を設定したい | P0 |
| U-W03 | 空き日時をカレンダーで管理したい | P0 |
| U-W04 | 予約リクエストを受け取り、承認/却下したい | P0 |
| U-W05 | 予約一覧を確認したい | P0 |
| U-W06 | 顧客からのレビューを確認したい | P0 |
| U-W07 | 顧客とメッセージでやり取りしたい | P1 |
| U-W08 | 新しい予約リクエストの通知を受け取りたい | P1 |

---

## 非機能要件

### パフォーマンス
- ページ読み込み時間: 3秒以内
- 検索結果表示: 2秒以内

### セキュリティ
- HTTPS通信
- パスワードのハッシュ化
- SQLインジェクション対策
- XSS対策

### 可用性
- 稼働率: 99%以上（MVP段階）

### 対応デバイス
- PC（Chrome, Firefox, Safari, Edge）
- スマートフォン（レスポンシブ対応）
